"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Serializer_1 = require("./lib/Serializer");
const Deserializer_1 = require("./lib/Deserializer");
function serialize(data, onUnsupported) {
    return new Serializer_1.Serializer(data, onUnsupported).process();
}
exports.serialize = serialize;
function deserialize(buffer, offset = -1) {
    const deserializer = new Deserializer_1.Deserializer(buffer);
    if (offset !== -1)
        deserializer.offset = offset;
    const value = deserializer.read();
    deserializer.clean();
    return value;
}
exports.deserialize = deserialize;
function deserializeWithMetadata(buffer, offset = -1) {
    const deserializer = new Deserializer_1.Deserializer(buffer);
    if (offset !== -1)
        deserializer.offset = offset;
    const value = deserializer.read();
    const bufferOffset = deserializer.offset;
    deserializer.clean();
    return {
        value,
        offset: bufferOffset === buffer.byteLength ? -1 : bufferOffset
    };
}
exports.deserializeWithMetadata = deserializeWithMetadata;
//# sourceMappingURL=index.js.map